<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>San Diego Footvolley Open - Overlay</title>
    <style>
        /*
        SAN DIEGO FOOTVOLLEY OPEN - BRANDED OVERLAY
        
        Tournament branding with four-corner layout:
        - Top Left: Scoreboard with OPEN logo
        - Top Right: Host logos (SDFTV + NFA)
        - Bottom Left: Tournament info with division selector
        - Bottom Right: Rotating sponsors
        */
        
        @font-face {
            font-family: 'DayPosterBlack';
            src: url('/fonts/DAYPBL__.TTF') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'AcuminVariable';
            src: url('/fonts/Acumin-Variable-Concept.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        body {
            margin: 0;
            padding: 0;
            background: transparent;
            font-family: 'AcuminVariable', 'Segoe UI', sans-serif;
            overflow: hidden;
            color: white;
            width: 100vw;
            height: 100vh;
        }

        .overlay-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
        }

        /* BRANDING COLORS FROM MANUAL */
        :root {
            --primary-pink: #FF6B9D;
            --primary-orange: #FF8A3D;
            --primary-yellow: #FFD93D;
            --primary-green: #6BCF7F;
            --primary-blue: #4F9BFF;
            --primary-purple: #9B7BFF;
            --dark-bg: rgba(0,0,0,0.9);
            --light-bg: rgba(255,255,255,0.95);
        }

        /* TOP LEFT: SCOREBOARD WITH OPEN LOGO */
        .scoreboard {
            position: absolute;
            top: 30px;
            left: 30px;
            background: linear-gradient(135deg, var(--dark-bg) 0%, rgba(0,0,0,0.8) 100%);
            border: 3px solid var(--primary-pink);
            border-radius: 20px;
            padding: 20px 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.6);
            backdrop-filter: blur(15px);
            min-width: 380px;
        }

        .scoreboard-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            gap: 15px;
        }

        .open-logo {
            width: 70px;
            height: 35px;
            background: linear-gradient(135deg, var(--primary-pink), var(--primary-orange));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'DayPosterBlack', Arial, sans-serif;
            font-size: 14px;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .scoreboard-title {
            font-family: 'DayPosterBlack', Arial, sans-serif;
            font-size: 14px;
            color: var(--primary-yellow);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .scores-container {
            display: flex;
            align-items: center;
            gap: 25px;
            justify-content: center;
        }

        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .team-name {
            font-family: 'AcuminVariable', sans-serif;
            font-size: 15px;
            font-weight: bold;
            color: var(--primary-yellow);
            text-transform: uppercase;
            text-align: center;
            min-height: 18px;
            letter-spacing: 0.5px;
        }

        .player-names {
            font-size: 11px;
            color: #E0E0E0;
            text-align: center;
            line-height: 1.2;
            display: none;
        }

        .team-score {
            font-family: 'DayPosterBlack', Arial, sans-serif;
            font-size: 42px;
            font-weight: bold;
            color: #FFFFFF;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
            text-align: center;
            min-width: 70px;
        }

        .score-separator {
            font-size: 32px;
            color: var(--primary-pink);
            font-weight: bold;
            margin: 0 10px;
        }

        .set-info {
            margin-top: 15px;
            text-align: center;
            padding-top: 12px;
            border-top: 2px solid rgba(255,255,255,0.2);
            font-size: 12px;
            color: #E0E0E0;
        }

        .set-scores {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 8px;
        }

        .set-score {
            background: rgba(255,255,255,0.1);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            min-width: 30px;
            text-align: center;
        }

        .set-score.current {
            background: var(--primary-pink);
            color: white;
            font-weight: bold;
        }

        /* TOP RIGHT: HOST LOGOS */
        .host-logos {
            position: absolute;
            top: 30px;
            right: 30px;
            background: var(--light-bg);
            border: 3px solid var(--primary-blue);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            text-align: center;
            min-width: 200px;
        }

        .host-text {
            font-family: 'AcuminVariable', sans-serif;
            font-size: 12px;
            font-weight: bold;
            color: #2D3748;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .logos-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .host-logo {
            max-width: 70px;
            max-height: 50px;
            object-fit: contain;
        }

        /* BOTTOM LEFT: TOURNAMENT INFO */
        .tournament-info {
            position: absolute;
            bottom: 30px;
            left: 30px;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-blue) 100%);
            border: 3px solid var(--primary-yellow);
            border-radius: 15px;
            padding: 18px 22px;
            max-width: 280px;
            color: white;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
        }

        .tournament-division {
            font-family: 'DayPosterBlack', Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .tournament-details {
            font-family: 'AcuminVariable', sans-serif;
            font-size: 12px;
            line-height: 1.3;
            opacity: 0.95;
        }

        .tournament-location {
            font-size: 10px;
            opacity: 0.8;
            margin-top: 4px;
            font-style: italic;
        }

        /* BOTTOM RIGHT: SPONSORS ROTATION */
        .sponsors-container {
            position: absolute;
            bottom: 30px;
            right: 30px;
            background: var(--light-bg);
            border: 3px solid var(--primary-orange);
            border-radius: 15px;
            padding: 18px;
            text-align: center;
            min-width: 150px;
            min-height: 90px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .sponsors-title {
            font-family: 'DayPosterBlack', Arial, sans-serif;
            font-size: 14px;
            font-weight: bold;
            color: #2D3748;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .sponsor-logo {
            max-width: 110px;
            max-height: 55px;
            object-fit: contain;
            transition: opacity 0.5s ease-in-out;
        }

        /* CENTER OVERLAYS: REPLAY AND RANKINGS */
        .replay-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, var(--primary-pink) 0%, var(--primary-orange) 100%);
            color: white;
            padding: 25px 50px;
            border-radius: 20px;
            font-family: 'DayPosterBlack', Arial, sans-serif;
            font-size: 32px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 12px 40px rgba(255,107,157,0.6);
            border: 3px solid rgba(255,255,255,0.3);
            display: none;
            animation: replayPulse 1.5s infinite;
        }

        @keyframes replayPulse {
            0% { 
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 12px 40px rgba(255,107,157,0.6);
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.05);
                box-shadow: 0 16px 50px rgba(255,107,157,0.8);
            }
            100% { 
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 12px 40px rgba(255,107,157,0.6);
            }
        }

        .rankings-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, var(--dark-bg) 0%, rgba(0,0,0,0.95) 100%);
            border: 4px solid var(--primary-yellow);
            border-radius: 18px;
            padding: 25px;
            max-width: 380px;
            display: none;
            box-shadow: 0 12px 50px rgba(0,0,0,0.8);
        }

        .rankings-title {
            font-family: 'DayPosterBlack', Arial, sans-serif;
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-yellow);
            text-align: center;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        .rankings-table {
            width: 100%;
            border-collapse: collapse;
        }

        .rankings-table th {
            background: var(--primary-pink);
            color: white;
            padding: 10px 12px;
            text-align: left;
            font-family: 'AcuminVariable', sans-serif;
            font-weight: bold;
            border-bottom: 2px solid var(--primary-yellow);
            font-size: 12px;
            text-transform: uppercase;
        }

        .rankings-table td {
            padding: 8px 12px;
            border-bottom: 1px solid rgba(255,255,255,0.15);
            color: #E0E0E0;
            font-family: 'AcuminVariable', sans-serif;
            font-size: 12px;
        }

        .rankings-table tr:nth-child(even) {
            background: rgba(255,255,255,0.05);
        }

        /* Highlight top 3 positions */
        .rankings-table .position-1 {
            background: linear-gradient(90deg, var(--primary-yellow), transparent);
        }

        .rankings-table .position-2 {
            background: linear-gradient(90deg, var(--primary-blue), transparent);
        }

        .rankings-table .position-3 {
            background: linear-gradient(90deg, var(--primary-orange), transparent);
        }

        /* ANIMATIONS */
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }

        .fade-out {
            animation: fadeOut 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0) scale(1); }
            to { opacity: 0; transform: translateY(-20px) scale(0.95); }
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 1280px) {
            .scoreboard, .host-logos, .sponsors-container, .tournament-info {
                padding: 15px 18px;
            }
            
            .scoreboard {
                min-width: 320px;
            }
            
            .team-score {
                font-size: 36px;
            }
            
            .open-logo {
                width: 60px;
                height: 30px;
                font-size: 12px;
            }
        }

        /* UTILITY CLASSES */
        .hidden {
            display: none !important;
        }

        .visible {
            display: block !important;
        }

        .flex-visible {
            display: flex !important;
        }

        /* LOADING STATE */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--primary-pink);
            font-family: 'AcuminVariable', sans-serif;
            font-size: 16px;
            text-align: center;
            background: var(--dark-bg);
            padding: 18px 25px;
            border-radius: 12px;
            border: 2px solid var(--primary-pink);
        }
    </style>
</head>
<body>
    <div class="overlay-container">
        <!-- LOADING STATE -->
        <div class="loading" id="loading-indicator">
            🔄 Connecting to San Diego Footvolley Open control...
        </div>

        <!-- TOP LEFT: SCOREBOARD WITH OPEN LOGO -->
        <div class="scoreboard" id="scoreboard">
            <div class="scoreboard-header">
                <div class="open-logo">OPEN</div>
                <div class="scoreboard-title">San Diego Footvolley</div>
            </div>
            
            <div class="scores-container">
                <!-- TEAM 1 -->
                <div class="team">
                    <div class="team-name" id="team1-name">Team 1</div>
                    <div class="player-names" id="team1-players">
                        <div id="team1-player1">Player 1A</div>
                        <div id="team1-player2">Player 1B</div>
                    </div>
                    <div class="team-score" id="team1-score">0</div>
                </div>

                <!-- SEPARATOR -->
                <div class="score-separator">-</div>

                <!-- TEAM 2 -->
                <div class="team">
                    <div class="team-name" id="team2-name">Team 2</div>
                    <div class="player-names" id="team2-players">
                        <div id="team2-player1">Player 2A</div>
                        <div id="team2-player2">Player 2B</div>
                    </div>
                    <div class="team-score" id="team2-score">0</div>
                </div>
            </div>
            
            <!-- SET SCORES -->
            <div class="set-info" id="set-info">
                <div id="set-current">Set 1 of 3</div>
                <div class="set-scores" id="set-scores-display">
                    <!-- Set scores will be populated here -->
                </div>
            </div>
        </div>

        <!-- TOP RIGHT: HOST LOGOS -->
        <div class="host-logos" id="host-logos">
            <div class="host-text">Hosted by:</div>
            <div class="logos-container">
                <img src="/logos/sdftv-logo.svg" alt="San Diego Footvolley" class="host-logo">
                <img src="/logos/nfa-logo.svg" alt="National Footvolley Association" class="host-logo">
            </div>
        </div>

        <!-- BOTTOM LEFT: TOURNAMENT INFO -->
        <div class="tournament-info" id="tournament-info">
            <div class="tournament-division" id="tournament-division">Open Division</div>
            <div class="tournament-details" id="tournament-details">
                <div id="tournament-round">Quarter Finals - Match 1</div>
                <div class="tournament-location" id="tournament-location">Mission Bay, San Diego - CA</div>
            </div>
        </div>

        <!-- BOTTOM RIGHT: SPONSORS -->
        <div class="sponsors-container" id="sponsors-container">
            <div class="sponsors-title">Sponsors</div>
            <img src="/sponsors/plex-logo.svg" alt="Sponsor" class="sponsor-logo" id="sponsor-logo">
        </div>

        <!-- CENTER: REPLAY INDICATOR -->
        <div class="replay-indicator" id="replay-indicator">
            🔄 Replay
        </div>

        <!-- CENTER: RANKINGS TABLE -->
        <div class="rankings-container" id="rankings-container">
            <div class="rankings-title">🏆 Tournament Rankings</div>
            <table class="rankings-table">
                <thead>
                    <tr>
                        <th>Pos</th>
                        <th>Team</th>
                        <th>Wins</th>
                        <th>Points</th>
                    </tr>
                </thead>
                <tbody id="rankings-content">
                    <!-- Rankings will be populated here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Socket.IO for real-time communication -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
        /**
         * SAN DIEGO FOOTVOLLEY OPEN - OVERLAY JAVASCRIPT
         * 
         * Handles real-time updates with tournament branding and sponsor rotation
         */
        
        // Connect to server for real-time updates
        const socket = io();
        
        // Get references to all overlay elements
        const elements = {
            loading: document.getElementById('loading-indicator'),
            scoreboard: document.getElementById('scoreboard'),
            
            // Team elements
            team1Name: document.getElementById('team1-name'),
            team1Score: document.getElementById('team1-score'),
            team1Players: document.getElementById('team1-players'),
            team1Player1: document.getElementById('team1-player1'),
            team1Player2: document.getElementById('team1-player2'),
            
            team2Name: document.getElementById('team2-name'),
            team2Score: document.getElementById('team2-score'),
            team2Players: document.getElementById('team2-players'),
            team2Player1: document.getElementById('team2-player1'),
            team2Player2: document.getElementById('team2-player2'),
            
            // Tournament elements
            setInfo: document.getElementById('set-info'),
            setCurrent: document.getElementById('set-current'),
            setScoresDisplay: document.getElementById('set-scores-display'),
            tournamentDivision: document.getElementById('tournament-division'),
            tournamentDetails: document.getElementById('tournament-details'),
            tournamentRound: document.getElementById('tournament-round'),
            tournamentLocation: document.getElementById('tournament-location'),
            
            // Interactive elements
            replayIndicator: document.getElementById('replay-indicator'),
            rankingsContainer: document.getElementById('rankings-container'),
            rankingsContent: document.getElementById('rankings-content'),
            sponsorLogo: document.getElementById('sponsor-logo'),
            sponsorsContainer: document.getElementById('sponsors-container')
        };
        
        // Store current game state and sponsors
        let currentGameState = {};
        let sponsors = [];
        let currentSponsorIndex = 0;
        let sponsorRotationInterval;
        
        /**
         * CONNECTION HANDLING
         */
        socket.on('connect', () => {
            console.log('✅ San Diego Footvolley Open overlay connected');
            elements.loading.style.display = 'none';
            elements.scoreboard.style.display = 'block';
            
            // Load sponsors and start rotation
            loadSponsors();
        });
        
        socket.on('disconnect', () => {
            console.log('❌ Overlay disconnected from server');
            elements.loading.style.display = 'block';
            elements.loading.textContent = '❌ Connection lost - Reconnecting...';
        });
        
        /**
         * GAME STATE UPDATES
         */
        socket.on('gameStateUpdate', (gameState) => {
            console.log('📊 Overlay received update:', gameState);
            currentGameState = gameState;
            updateOverlay();
        });
        
        /**
         * UPDATE OVERLAY DISPLAY
         */
        function updateOverlay() {
            const state = currentGameState;
            
            updateTeamInfo(state);
            updateSetScores(state);
            updateTournamentInfo(state);
            handleReplayDisplay(state);
            handleRankingsDisplay(state);
            handlePlayerNamesDisplay(state);
        }
        
        /**
         * UPDATE TEAM INFORMATION
         */
        function updateTeamInfo(state) {
            if (state.team1) {
                elements.team1Name.textContent = state.team1.name || 'Team 1';
                elements.team1Score.textContent = state.team1.score || 0;
                
                if (state.team1.players) {
                    elements.team1Player1.textContent = state.team1.players[0] || '';
                    elements.team1Player2.textContent = state.team1.players[1] || '';
                }
            }
            
            if (state.team2) {
                elements.team2Name.textContent = state.team2.name || 'Team 2';
                elements.team2Score.textContent = state.team2.score || 0;
                
                if (state.team2.players) {
                    elements.team2Player1.textContent = state.team2.players[0] || '';
                    elements.team2Player2.textContent = state.team2.players[1] || '';
                }
            }
        }
        
        /**
         * UPDATE SET SCORES
         */
        function updateSetScores(state) {
            if (!state.setScores || state.currentSet === 1) {
                elements.setInfo.style.display = 'none';
                return;
            }
            
            elements.setCurrent.textContent = `Set ${state.currentSet} of ${state.maxSets}`;
            
            let html = '';
            for (let i = 0; i < state.maxSets; i++) {
                const team1Score = state.setScores.team1[i] || 0;
                const team2Score = state.setScores.team2[i] || 0;
                const isCurrentSet = (i + 1) === state.currentSet;
                
                if (team1Score > 0 || team2Score > 0 || isCurrentSet) {
                    html += `<div class="set-score ${isCurrentSet ? 'current' : ''}">${team1Score}-${team2Score}</div>`;
                }
            }
            
            elements.setScoresDisplay.innerHTML = html;
            elements.setInfo.style.display = 'block';
        }
        
        /**
         * UPDATE TOURNAMENT INFO
         */
        function updateTournamentInfo(state) {
            if (state.tournament) {
                elements.tournamentDivision.textContent = state.tournament.division || 'Open Division';
                
                const roundText = state.tournament.round || 'Match';
                const matchNumber = state.tournament.matchNumber || 1;
                elements.tournamentRound.textContent = `${roundText} - Match ${matchNumber}`;
                
                elements.tournamentLocation.textContent = state.tournament.location || 'Mission Bay, San Diego - CA';
            }
        }
        
        /**
         * HANDLE REPLAY DISPLAY
         */
        function handleReplayDisplay(state) {
            if (state.showReplay) {
                elements.replayIndicator.classList.add('visible');
                elements.replayIndicator.classList.add('fade-in');
                
                setTimeout(() => {
                    elements.replayIndicator.classList.remove('visible');
                    elements.replayIndicator.classList.remove('fade-in');
                }, 4500);
            }
        }
        
        /**
         * HANDLE RANKINGS DISPLAY
         */
        function handleRankingsDisplay(state) {
            if (state.showRankings) {
                fetchAndDisplayRankings();
            } else {
                elements.rankingsContainer.classList.remove('visible');
            }
        }
        
        /**
         * HANDLE PLAYER NAMES VS TEAM NAMES
         */
        function handlePlayerNamesDisplay(state) {
            if (state.showPlayerNames) {
                elements.team1Name.style.display = 'none';
                elements.team2Name.style.display = 'none';
                elements.team1Players.style.display = 'block';
                elements.team2Players.style.display = 'block';
            } else {
                elements.team1Name.style.display = 'block';
                elements.team2Name.style.display = 'block';
                elements.team1Players.style.display = 'none';
                elements.team2Players.style.display = 'none';
            }
        }
        
        /**
         * SPONSOR ROTATION SYSTEM
         */
        async function loadSponsors() {
            try {
                const response = await fetch('/api/sponsors');
                const data = await response.json();
                
                if (data.sponsors && data.sponsors.length > 0) {
                    sponsors = data.sponsors;
                    startSponsorRotation();
                } else {
                    // Use placeholder if no sponsors
                    sponsors = ['/sponsors/plex-logo.svg', '/sponsors/beach-gear-logo.svg', '/sponsors/nutrition-logo.svg'];
                    startSponsorRotation();
                }
            } catch (error) {
                console.log('⚠️ Could not load sponsors, using placeholder');
                sponsors = ['/sponsors/plex-logo.svg'];
                elements.sponsorLogo.src = sponsors[0];
            }
        }
        
        function startSponsorRotation() {
            if (sponsors.length <= 1) return;
            
            // Clear any existing interval
            if (sponsorRotationInterval) {
                clearInterval(sponsorRotationInterval);
            }
            
            // Start rotating sponsors every 5 seconds
            sponsorRotationInterval = setInterval(() => {
                currentSponsorIndex = (currentSponsorIndex + 1) % sponsors.length;
                
                // Fade out current sponsor
                elements.sponsorLogo.style.opacity = '0';
                
                // Change sponsor after fade out
                setTimeout(() => {
                    elements.sponsorLogo.src = sponsors[currentSponsorIndex];
                    elements.sponsorLogo.style.opacity = '1';
                }, 250);
                
            }, 5000);
            
            // Set initial sponsor
            elements.sponsorLogo.src = sponsors[0];
        }
        
        /**
         * FETCH AND DISPLAY RANKINGS
         */
        async function fetchAndDisplayRankings() {
            try {
                console.log('📊 Fetching tournament rankings...');
                
                const response = await fetch('/api/rankings');
                const data = await response.json();
                
                if (data.error) {
                    console.log('⚠️ Rankings not available:', data.message);
                    displayPlaceholderRankings();
                    return;
                }
                
                if (data.data && data.data.length > 0) {
                    displayRankings(data.data);
                } else {
                    displayPlaceholderRankings();
                }
                
                // Show rankings with animation
                elements.rankingsContainer.classList.add('visible');
                elements.rankingsContainer.classList.add('fade-in');
                
                // Auto-hide after 10 seconds
                setTimeout(() => {
                    elements.rankingsContainer.classList.remove('visible');
                    elements.rankingsContainer.classList.remove('fade-in');
                }, 10000);
                
            } catch (error) {
                console.error('❌ Error fetching rankings:', error);
                displayPlaceholderRankings();
            }
        }
        
        /**
         * DISPLAY RANKINGS DATA
         */
        function displayRankings(rankingsData) {
            let html = '';
            
            rankingsData.slice(1).forEach((row, index) => {
                const position = index + 1;
                const team = row[0] || `Team ${position}`;
                const wins = row[1] || '0';
                const points = row[2] || '0';
                
                html += `
                    <tr class="position-${position}">
                        <td>${position}</td>
                        <td>${team}</td>
                        <td>${wins}</td>
                        <td>${points}</td>
                    </tr>
                `;
            });
            
            elements.rankingsContent.innerHTML = html;
            console.log('📊 Rankings displayed successfully');
        }
        
        /**
         * DISPLAY PLACEHOLDER RANKINGS
         */
        function displayPlaceholderRankings() {
            const placeholderData = [
                ['Beach Legends', '3', '9'],
                ['Sand Warriors', '2', '6'],
                ['Spike Masters', '2', '6'],
                ['Net Ninjas', '1', '3'],
                ['Serve Aces', '0', '0']
            ];
            
            let html = '';
            placeholderData.forEach((team, index) => {
                const position = index + 1;
                html += `
                    <tr class="position-${position}">
                        <td>${position}</td>
                        <td>${team[0]}</td>
                        <td>${team[1]}</td>
                        <td>${team[2]}</td>
                    </tr>
                `;
            });
            
            elements.rankingsContent.innerHTML = html;
            console.log('📊 Placeholder rankings displayed');
        }
        
        /**
         * INITIALIZE OVERLAY
         */
        function initializeOverlay() {
            console.log('🏐 San Diego Footvolley Open overlay initialized');
            console.log('📺 Waiting for referee control updates...');
            
            setTimeout(() => {
                if (socket.connected) {
                    elements.loading.style.display = 'none';
                    elements.scoreboard.style.display = 'block';
                }
            }, 2000);
        }
        
        // Start the overlay when page loads
        initializeOverlay();
        
        // Error handling
        window.addEventListener('error', (e) => {
            console.error('❌ Overlay error:', e.error);
        });
        
        // Prevent context menu and interactions
        document.addEventListener('contextmenu', (e) => e.preventDefault());
        document.addEventListener('selectstart', (e) => e.preventDefault());
        document.addEventListener('dragstart', (e) => e.preventDefault());
    </script>
</body>
</html>
